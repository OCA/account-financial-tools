<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <record id="invoice_supplier_form" model="ir.ui.view">
    <field name="name">account.invoice.supplier.form</field>
    <field name="model">account.invoice</field>
    <field name="inherit_id" ref="account.invoice_supplier_form"/>
    <field name="arch" type="xml">
      <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='quantity']" position="before">
        <field name="asset_profile_id"/>
        <field name="tax_profile_id" invisible="1" force_save="1"/>
        <field name="asset_salvage_value"/>
      </xpath>
    </field>
  </record>

  <record id="invoice_supplier_form_button" model="ir.ui.view">
    <field name="name">account.invoice.supplier.form</field>
    <field name="model">account.invoice</field>
    <field name="inherit_id" ref="account_documents.invoice_supplier_documents_form"/>
    <field name="arch" type="xml">
      <xpath expr="//div[@name='button_box']" position="inside">
          <button name="action_add_asset" type="object"
              class="oe_stat_button"
              icon="fa fa-paperclip"
              attrs="{'invisible': [('count_assets', '=', 0)]}">
              <field string="Add assets" name="count_assets" widget="statinfo"/>
          </button>
      </xpath>
    </field>
  </record>

  <record id="invoice_form" model="ir.ui.view">
    <field name="name">account.invoice.customer.form</field>
    <field name="model">account.invoice</field>
    <field name="inherit_id" ref="account.invoice_form"/>
    <field name="arch" type="xml">
      <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='quantity']" position="before">
        <field name="asset_id" groups="account.group_account_manager" domain="[('product_id', '=', product_id)]"/>
      </xpath>
    </field>
  </record>

</odoo>
