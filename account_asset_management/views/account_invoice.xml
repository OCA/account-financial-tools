<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <record id="invoice_supplier_form" model="ir.ui.view">
    <field name="name">account.invoice.supplier.form</field>
    <field name="model">account.invoice</field>
    <field name="inherit_id" ref="account.invoice_supplier_form"/>
    <field name="arch" type="xml">
      <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='quantity']" position="before">
        <field name="asset_profile_id"/>
        <field name="tax_profile_id" invisible="1" force_save="1"/>
        <field name="asset_salvage_value"/>
      </xpath>
    </field>
  </record>

  <record id="invoice_supplier_form_button" model="ir.ui.view">
    <field name="name">account.invoice.supplier.form</field>
    <field name="model">account.invoice</field>
    <field name="inherit_id" ref="account_documents.invoice_supplier_documents_form"/>
    <field name="arch" type="xml">
      <xpath expr="//div[@name='button_box']" position="inside">
          <field name="count_all_assets" invisible="1"/>
          <button name="toggle_force_add_assets" type="object"
                  class="oe_stat_button"
                  icon="fa-cubes" attrs="{'invisible': [('count_all_assets', '=', 0)]}">
                  <field name="force_add_assets" widget="boolean_button"
                      options='{"terminology": {"string_true": "Force assets", "hover_true": "FORCE ADD", "string_false": "Choice assets", "hover_false": "NO ADDS"}}'/>
          </button>
          <button name="action_add_asset" type="object"
              class="oe_stat_button"
              icon="fa fa-paperclip"
              attrs="{'invisible': ['|', ('count_assets', '=', 0), ('force_add_assets', '=', True)]}">
              <field string="Add assets" name="count_assets" widget="statinfo"/>
          </button>
          <button name="action_view_asset" type="object"
              class="oe_stat_button"
              icon="fa fa-paperclip"
              attrs="{'invisible': [('count_in_assets', '=', 0)]}">
              <field string="View assets" name="count_in_assets" widget="statinfo"/>
          </button>
      </xpath>
    </field>
  </record>

  <record id="invoice_form" model="ir.ui.view">
    <field name="name">account.invoice.customer.form</field>
    <field name="model">account.invoice</field>
    <field name="inherit_id" ref="account.invoice_form"/>
    <field name="arch" type="xml">
      <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='quantity']" position="before">
        <field name="asset_id" groups="account.group_account_manager" domain="[('product_id', '=', product_id)]"/>
      </xpath>
    </field>
  </record>

</odoo>
